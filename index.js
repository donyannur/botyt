const a0_0x52c88d=a0_0x3418;(function(_0x3d09e6,_0x2be403){const _0x4e11be=a0_0x3418,_0x49eb72=_0x3d09e6();while(!![]){try{const _0x5e3f75=-parseInt(_0x4e11be(0x128))/0x1*(parseInt(_0x4e11be(0x142))/0x2)+-parseInt(_0x4e11be(0x11e))/0x3*(-parseInt(_0x4e11be(0xea))/0x4)+-parseInt(_0x4e11be(0xdf))/0x5*(parseInt(_0x4e11be(0x10d))/0x6)+parseInt(_0x4e11be(0xe3))/0x7+parseInt(_0x4e11be(0xe5))/0x8+parseInt(_0x4e11be(0x14c))/0x9*(-parseInt(_0x4e11be(0x145))/0xa)+parseInt(_0x4e11be(0xee))/0xb;if(_0x5e3f75===_0x2be403)break;else _0x49eb72['push'](_0x49eb72['shift']());}catch(_0x3693ed){_0x49eb72['push'](_0x49eb72['shift']());}}}(a0_0x192f,0xb6ca8));import{google}from'googleapis';import{createClient}from'pexels';import{GoogleGenerativeAI}from'@google/generative-ai';import a0_0x45f7ad from'fluent-ffmpeg';import a0_0x1013ef from'fs/promises';import a0_0x281e1e from'path';import a0_0x4970c9 from'https';import{exec}from'child_process';import a0_0x21bfd1 from'axios';const log=(_0x3f6a4d,_0x38d288=a0_0x52c88d(0x147))=>console[a0_0x52c88d(0x13d)]('['+new Date()[a0_0x52c88d(0x103)]()+a0_0x52c88d(0x117)+_0x38d288+'\x20-\x20'+_0x3f6a4d),__dirname=a0_0x281e1e['dirname'](new URL(import.meta[a0_0x52c88d(0x11b)])[a0_0x52c88d(0xe4)]),OUTPUT_DIR=a0_0x281e1e[a0_0x52c88d(0x15a)](__dirname,a0_0x52c88d(0xfd)),DOWNLOADS_DIR=a0_0x281e1e['join'](__dirname,a0_0x52c88d(0x111)),CONFIG_FILE=a0_0x281e1e[a0_0x52c88d(0x15a)](__dirname,a0_0x52c88d(0xc7));async function loadConfig(){const _0xf5e270=a0_0x52c88d;log(_0xf5e270(0x12e));const _0x561c33=await a0_0x1013ef[_0xf5e270(0x110)](CONFIG_FILE,_0xf5e270(0xfe)),_0x553661=JSON[_0xf5e270(0x159)](_0x561c33),_0xd7a654=_0x553661['api_secrets']||{};_0x553661[_0xf5e270(0x112)]={'pexels':process[_0xf5e270(0x137)][_0xd7a654['pexels']],'gemini':process[_0xf5e270(0x137)][_0xd7a654['gemini']]};if(!_0x553661[_0xf5e270(0x112)][_0xf5e270(0x12f)]||!_0x553661[_0xf5e270(0x112)]['gemini'])throw new Error(_0xf5e270(0x119));return _0x553661;}async function authorize(){const _0x367546=a0_0x52c88d;log(_0x367546(0x132));const _0x349589=a0_0x281e1e[_0x367546(0x15a)](__dirname,'client_secret.json'),_0x17e99e=a0_0x281e1e['join'](__dirname,'token.json'),{authenticate:_0x1266fe}=await import('@google-cloud/local-auth'),_0x58f390=await a0_0x1013ef[_0x367546(0x110)](_0x349589,'utf-8'),_0x430dbb=JSON['parse'](_0x58f390),_0x5751bb=_0x430dbb[_0x367546(0x12a)]||_0x430dbb['web'],_0x38d8f0=new google[(_0x367546(0x12b))][(_0x367546(0x13e))](_0x5751bb[_0x367546(0x11a)],_0x5751bb['client_secret'],_0x5751bb[_0x367546(0xda)]?_0x5751bb[_0x367546(0xda)][0x0]:undefined);try{const _0x1eebac=await a0_0x1013ef[_0x367546(0x110)](_0x17e99e,_0x367546(0xfe));_0x38d8f0[_0x367546(0xf9)](JSON[_0x367546(0x159)](_0x1eebac));}catch(_0x125a6c){throw new Error('FATAL:\x20token.json\x20tidak\x20ditemukan.\x20Harap\x20jalankan\x20otorisasi\x20lokal\x20terlebih\x20dahulu\x20via\x20authorize.js');}if(_0x38d8f0[_0x367546(0xd7)]&&_0x38d8f0[_0x367546(0xd7)]()){const {credentials:_0x337ec6}=await _0x38d8f0[_0x367546(0xed)]();_0x38d8f0[_0x367546(0xf9)](_0x337ec6),await a0_0x1013ef[_0x367546(0xeb)](_0x17e99e,JSON[_0x367546(0xd6)](_0x337ec6)),log('Token\x20berhasil\x20di-refresh.');}return log(_0x367546(0x157)),_0x38d8f0;}function a0_0x3418(_0x532e1c,_0x11e44a){const _0x192f59=a0_0x192f();return a0_0x3418=function(_0x341839,_0x1c11b3){_0x341839=_0x341839-0xc7;let _0x1f10d5=_0x192f59[_0x341839];return _0x1f10d5;},a0_0x3418(_0x532e1c,_0x11e44a);}async function uploadVideo(_0x3b2627,_0x25a4bf,_0x9a196c,_0x17434e){const _0x2aca1b=a0_0x52c88d;log('Memulai\x20upload\x20video\x20ke\x20YouTube...');const _0x1f5068=google['youtube']('v3'),_0x4415e2=_0x9a196c[_0x2aca1b(0x113)]||_0x17434e['substring'](0x0,0x63),_0x26f1eb=_0x9a196c[_0x2aca1b(0xc8)]||_0x17434e+'\x0a\x0a'+(_0x9a196c[_0x2aca1b(0x100)]?_0x9a196c['hashtags'][_0x2aca1b(0x10a)](_0x2c0b8d=>'#'+_0x2c0b8d)[_0x2aca1b(0x15a)]('\x20'):'#shorts'),_0x4b28cd=_0x9a196c[_0x2aca1b(0x150)]||_0x9a196c[_0x2aca1b(0x100)]||[_0x2aca1b(0x109),'inspirasi'],_0xdd550d='22',_0x5da9e6=await _0x1f5068[_0x2aca1b(0xe8)][_0x2aca1b(0x14f)]({'auth':_0x3b2627,'part':_0x2aca1b(0xf5),'requestBody':{'snippet':{'title':_0x4415e2,'description':_0x26f1eb,'tags':_0x4b28cd,'categoryId':_0xdd550d},'status':{'privacyStatus':_0x2aca1b(0xcb)}},'media':{'body':(await import('fs'))['createReadStream'](_0x25a4bf)}});return log('Video\x20berhasil\x20diunggah!\x20ID:\x20'+_0x5da9e6[_0x2aca1b(0x10e)]['id']),_0x5da9e6[_0x2aca1b(0x10e)];}function wrapText(_0x251e70,_0x1eea26){const _0x5c2faa=a0_0x52c88d,_0x37abb4=_0x251e70[_0x5c2faa(0x148)]('\x20');let _0x57e2eb=[],_0x3409f3='';for(const _0x6ca478 of _0x37abb4){(_0x3409f3+'\x20'+_0x6ca478)[_0x5c2faa(0x10b)]>_0x1eea26&&_0x3409f3[_0x5c2faa(0x10b)]>0x0?(_0x57e2eb[_0x5c2faa(0xd5)](_0x3409f3),_0x3409f3=_0x6ca478):_0x3409f3+=(_0x3409f3['length']===0x0?'':'\x20')+_0x6ca478;}return _0x57e2eb[_0x5c2faa(0xd5)](_0x3409f3),_0x57e2eb[_0x5c2faa(0x15a)]('\x0a');}async function cleanup(_0x59a01b){const _0xe88855=a0_0x52c88d;log('Membersihkan\x20file\x20temporary...');for(const _0x1e04cb of _0x59a01b){try{await a0_0x1013ef[_0xe88855(0x14e)](_0x1e04cb)[_0xe88855(0x135)](()=>![])&&await a0_0x1013ef[_0xe88855(0x13c)](_0x1e04cb);}catch(_0x52f298){log('Peringatan\x20saat\x20menghapus\x20'+_0x1e04cb+':\x20'+_0x52f298['message'],_0xe88855(0xcc));}}}async function getQuote(_0x400b0a){const _0x341e6a=a0_0x52c88d;log(_0x341e6a(0xd0));const _0x4ad2b1=await a0_0x1013ef[_0x341e6a(0x110)](_0x400b0a,_0x341e6a(0xfe)),_0x1ce594=_0x4ad2b1[_0x341e6a(0x148)]('\x0a')[_0x341e6a(0xd4)](_0x1c64c8=>_0x1c64c8[_0x341e6a(0x104)]()!=='');if(_0x1ce594[_0x341e6a(0x10b)]===0x0)return null;return _0x1ce594[0x0];}async function getMusicPath(_0x3aa43b){const _0x3788ce=a0_0x52c88d,_0x12f065=a0_0x281e1e[_0x3788ce(0x15a)](__dirname,_0x3aa43b[_0x3788ce(0xff)]);try{const _0x45aac1=await a0_0x1013ef[_0x3788ce(0x131)](_0x12f065),_0x233f8a=_0x45aac1[_0x3788ce(0xd4)](_0x1a7121=>[_0x3788ce(0x155),'.wav',_0x3788ce(0xe2)][_0x3788ce(0x13b)](a0_0x281e1e['extname'](_0x1a7121)[_0x3788ce(0x106)]()));if(_0x233f8a[_0x3788ce(0x10b)]===0x0)return log('Tidak\x20ada\x20file\x20audio\x20valid\x20di\x20folder\x20musik.',_0x3788ce(0xcc)),null;const _0x3b7040=_0x233f8a[Math['floor'](Math[_0x3788ce(0x120)]()*_0x233f8a['length'])];return log('File\x20musik\x20dipilih:\x20'+_0x3b7040),a0_0x281e1e[_0x3788ce(0x15a)](_0x12f065,_0x3b7040);}catch(_0x190546){return log(_0x3788ce(0xec)+_0x12f065+_0x3788ce(0xe7),'WARN'),null;}}async function downloadFootage(_0x4b9172,_0x3e44cb){const _0x35d643=a0_0x52c88d;log(_0x35d643(0x122)+_0x3e44cb+_0x35d643(0xf8));const _0x40852b=createClient(_0x4b9172),_0x56a023=await _0x40852b[_0x35d643(0xe8)]['search']({'query':_0x3e44cb,'page':0x1,'per_page':0x50,'orientation':_0x35d643(0x125)});if(!_0x56a023[_0x35d643(0xe8)]||_0x56a023[_0x35d643(0xe8)][_0x35d643(0x10b)]===0x0)throw new Error(_0x35d643(0x144)+_0x3e44cb);const _0x4d1344=_0x56a023[_0x35d643(0xe8)][Math[_0x35d643(0xce)](Math[_0x35d643(0x120)]()*_0x56a023[_0x35d643(0xe8)][_0x35d643(0x10b)])],_0x2e3cd2=_0x4d1344[_0x35d643(0x108)][_0x35d643(0xd9)](_0x3157a3=>_0x3157a3[_0x35d643(0x14b)]==='hd'&&_0x3157a3['height']>=0x438)||_0x4d1344[_0x35d643(0x108)][0x0],_0x16ed84=_0x2e3cd2['link'],_0x5775a6=a0_0x281e1e[_0x35d643(0x15a)](DOWNLOADS_DIR,_0x4d1344['id']+_0x35d643(0x156));log(_0x35d643(0x133)+_0x16ed84);const _0x4ca42a=(await import('fs'))['createWriteStream'](_0x5775a6),_0xc8e114=await a0_0x21bfd1({'url':_0x16ed84,'method':_0x35d643(0x134),'responseType':_0x35d643(0x140)});return _0xc8e114[_0x35d643(0x10e)][_0x35d643(0x136)](_0x4ca42a),new Promise((_0x1664f2,_0x35927d)=>{const _0x2e9b7a=_0x35d643;_0x4ca42a['on'](_0x2e9b7a(0x118),()=>_0x1664f2(_0x5775a6)),_0x4ca42a['on'](_0x2e9b7a(0x129),_0x35927d);});}async function generateQuoteMetadata(_0x116b5f,_0x4760cb,_0x22301c){const _0x353109=a0_0x52c88d;log(_0x353109(0xe9));const _0x3e5348=new GoogleGenerativeAI(_0x116b5f),_0x58cc53=_0x3e5348[_0x353109(0xfa)]({'model':_0x353109(0x121)}),_0x26a335=_0x22301c[_0x353109(0x146)](_0x353109(0x11c),_0x4760cb);try{const _0x320f9d=await _0x58cc53['generateContent'](_0x26a335),_0x524b96=_0x320f9d[_0x353109(0x139)]['text'](),_0x5f49ee=_0x524b96[_0x353109(0xd1)]('{'),_0x534d53=_0x524b96[_0x353109(0x105)]('}');if(_0x5f49ee===-0x1||_0x534d53===-0x1)throw new Error(_0x353109(0x11d));const _0x53822a=_0x524b96['substring'](_0x5f49ee,_0x534d53+0x1);return JSON['parse'](_0x53822a);}catch(_0x332ddc){return log(_0x353109(0x101)+_0x332ddc[_0x353109(0x116)],_0x353109(0x151)),{};}}async function createQuoteVideo(_0x3316d4,_0x1346de,_0x187a8e,_0x2726d6,_0x22c163){const _0x3115fe=a0_0x52c88d;log(_0x3115fe(0x127));const {video_settings:_0x21b662,text_settings:_0x5667cd}=_0x2726d6,_0x13985d=a0_0x281e1e[_0x3115fe(0x15a)](__dirname,_0x5667cd[_0x3115fe(0xe6)]),_0x154a56=wrapText(_0x187a8e,0x1e),_0x1834fb=a0_0x281e1e[_0x3115fe(0x15a)](DOWNLOADS_DIR,'quote_text.png');log(_0x3115fe(0x13f));const _0x1b5e95=_0x3115fe(0xca)+_0x5667cd[_0x3115fe(0xf6)]+_0x3115fe(0x123)+_0x5667cd[_0x3115fe(0x107)]+'\x22\x20\x20\x20\x20\x20\x20\x20\x20\x20-font\x20\x22'+_0x13985d+'\x22\x20-pointsize\x20'+_0x5667cd[_0x3115fe(0xdd)]+_0x3115fe(0xf3)+_0x154a56[_0x3115fe(0x146)](/"/g,'\x5c\x22')+_0x3115fe(0x10c)+_0x1834fb+_0x3115fe(0x12c);await new Promise((_0x2ca4ba,_0x2de24b)=>{exec(_0x1b5e95,(_0x315847,_0x2b7e1a,_0x5452da)=>{const _0x5f6cc8=a0_0x3418;if(_0x315847)return _0x2de24b(new Error(_0x5f6cc8(0x12d)+(_0x5452da||_0x315847[_0x5f6cc8(0x116)])));_0x2ca4ba(_0x2b7e1a);});}),log(_0x3115fe(0xf0));const _0x3f8526=_0x3115fe(0xcf)+(_0x5667cd[_0x3115fe(0xe1)]||0.5)+_0x3115fe(0x158);return new Promise((_0x44debf,_0x2372b8)=>{const _0xc965d9=_0x3115fe,_0x2de490=a0_0x45f7ad(_0x3316d4)[_0xc965d9(0x102)](_0x1834fb);_0x1346de&&_0x2de490['input'](_0x1346de),_0x2de490['complexFilter'](['[0:v]scale=1080:1920:force_original_aspect_ratio=increase,crop=1080:1920[base]',_0xc965d9(0x126)+_0x3f8526+_0xc965d9(0x114)])[_0xc965d9(0x154)]([_0xc965d9(0x152),_0xc965d9(0x114),_0xc965d9(0x152),_0x1346de?_0xc965d9(0x141):_0xc965d9(0xf4),_0xc965d9(0x115),'aac',_0xc965d9(0xdb)]),_0x2de490[_0xc965d9(0x124)](_0x21b662[_0xc965d9(0x149)])['on'](_0xc965d9(0x153),_0x52997a=>log(_0xc965d9(0x14d)+_0x52997a))['on'](_0xc965d9(0x143),()=>{const _0x3a9ae9=_0xc965d9;log(_0x3a9ae9(0xfb)+_0x22c163),_0x44debf(_0x22c163);})['on'](_0xc965d9(0x129),(_0x4d627e,_0x283820,_0x304196)=>_0x2372b8(new Error('Error\x20FFmpeg:\x20'+(_0x304196||_0x4d627e['message']))))[_0xc965d9(0xde)](_0x22c163);});}async function updateQuoteFile(_0x44e530,_0x7702bf,_0x54a6f0){const _0x48f08e=a0_0x52c88d;log('Memperbarui\x20file\x20kutipan...'),await a0_0x1013ef[_0x48f08e(0x10f)](_0x54a6f0,_0x44e530+'\x0a');const _0x222b7f=await a0_0x1013ef[_0x48f08e(0x110)](_0x7702bf,_0x48f08e(0xfe)),_0x1a4dbd=_0x222b7f[_0x48f08e(0x148)]('\x0a'),_0x47f70a=_0x1a4dbd[_0x48f08e(0xd2)](0x1);await a0_0x1013ef[_0x48f08e(0xeb)](_0x7702bf,_0x47f70a[_0x48f08e(0x15a)]('\x0a'));}function a0_0x192f(){const _0x2d9a07=['stream','2:a?','2DTovOu','end','Tidak\x20ada\x20video\x20Pexels\x20yang\x20ditemukan\x20untuk\x20keyword:\x20','10KJFowS','replace','INFO','split','duration_seconds','\x27.\x20Melewati\x20eksekusi.','quality','4719987BHthfb','Perintah\x20FFmpeg:\x20','stat','insert','tags','ERROR','-map','start','outputOptions','.mp3','.mp4','Otorisasi\x20dari\x20file\x20berhasil.',')-(h/2)','parse','join','config.json','description','ai_prompt','\x0a\x20\x20\x20\x20\x20\x20\x20\x20convert\x20-background\x20\x22','public','WARN','=====\x20MEMULAI\x20BOT\x20KUTIPAN\x20=====','floor','(H*','Membaca\x20file\x20kutipan...','indexOf','slice','quote_video.mp4','filter','push','stringify','isTokenExpiring','Mode\x20bot\x20diatur\x20ke\x20\x27','find','redirect_uris','-shortest','mkdir','font_size','save','540OyTcOE','quote_text.png','vertical_align','.m4a','1360653ZQAlHY','pathname','3676048IwNmJo','font_path','\x27\x20tidak\x20ditemukan,\x20melanjutkan\x20tanpa\x20musik.','videos','Menghasilkan\x20metadata\x20kutipan\x20dengan\x20Gemini\x20AI...','116WxCmTe','writeFile','Folder\x20musik\x20\x27','refreshAccessToken','12960233QfzrHj','source_file','Menggabungkan\x20video\x20dengan\x20FFmpeg...','FATAL\x20ERROR:\x20Bot\x20berhenti\x20karena:\x20','processed_quotes.log','\x20\x20\x20\x20\x20\x20\x20\x20\x20-gravity\x20Center\x20-size\x20980x\x20-interline-spacing\x2015\x20\x20\x20\x20\x20\x20\x20\x20\x20caption:\x22','0:a?','snippet,status','background_color','bot_mode','\x27...','setCredentials','getGenerativeModel','Video\x20kutipan\x20berhasil\x20dibuat:\x20','pexels_keyword','output','utf-8','music_folder','hashtags','Gagal\x20mem-parsing\x20metadata\x20dari\x20Gemini:\x20','input','toISOString','trim','lastIndexOf','toLowerCase','font_color','video_files','quotes','map','length','\x22\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22','12216oEwCiY','data','appendFile','readFile','downloads','api_keys','title','[v_final]','-c:a','message',']\x20-\x20','finish','FATAL:\x20Nama\x20secret\x20untuk\x20API\x20Key\x20tidak\x20ditemukan\x20di\x20env.','client_id','url','{quote}','Respons\x20Gemini\x20tidak\x20mengandung\x20format\x20JSON.','118983BTaDOq','gemini','random','gemini-1.5-flash','Mencari\x20video\x20di\x20Pexels:\x20\x27','\x22\x20-fill\x20\x22','duration','portrait','[base][1:v]overlay=(W-w)/2:','Membuat\x20video\x20kutipan...','1489214YbBOWS','error','installed','auth','\x22\x0a\x20\x20\x20\x20','Error\x20ImageMagick:\x20','Memuat\x20config.json...','pexels','exit','readdir','Memulai\x20proses\x20otorisasi\x20dari\x20file...','Mengunduh\x20video:\x20','GET','catch','pipe','env','Tidak\x20ada\x20kutipan\x20baru\x20untuk\x20diproses.','response','quote_bot_config','includes','unlink','log','OAuth2','Membuat\x20gambar\x20teks\x20dengan\x20ImageMagick...'];a0_0x192f=function(){return _0x2d9a07;};return a0_0x192f();}async function runQuotesBot(_0x3e0d45){const _0x68f5a5=a0_0x52c88d;log(_0x68f5a5(0xcd));const _0x8d883e=_0x3e0d45[_0x68f5a5(0x13a)],_0x4b7b14=a0_0x281e1e[_0x68f5a5(0x15a)](OUTPUT_DIR,_0x68f5a5(0xd3)),_0x5c0ba8=a0_0x281e1e['join'](__dirname,_0x8d883e[_0x68f5a5(0xef)]),_0x597290=a0_0x281e1e[_0x68f5a5(0x15a)](__dirname,_0x68f5a5(0xf2));let _0x545de4=[_0x4b7b14];const _0x444d8d=await getQuote(_0x5c0ba8);if(!_0x444d8d){log(_0x68f5a5(0x138));return;}const _0x5e8e42=await downloadFootage(_0x3e0d45[_0x68f5a5(0x112)]['pexels'],_0x8d883e[_0x68f5a5(0xfc)]);_0x545de4[_0x68f5a5(0xd5)](_0x5e8e42);const _0x231fc7=await getMusicPath(_0x8d883e['audio_settings']);if(_0x231fc7)_0x545de4[_0x68f5a5(0xd5)](_0x231fc7);const _0x49b7c2=await generateQuoteMetadata(_0x3e0d45[_0x68f5a5(0x112)][_0x68f5a5(0x11f)],_0x444d8d,_0x8d883e[_0x68f5a5(0xc9)]);await createQuoteVideo(_0x5e8e42,_0x231fc7,_0x444d8d,_0x8d883e,_0x4b7b14);const _0x31205e=a0_0x281e1e[_0x68f5a5(0x15a)](DOWNLOADS_DIR,_0x68f5a5(0xe0));_0x545de4['push'](_0x31205e);const _0x3bbca8=await authorize();return await uploadVideo(_0x3bbca8,_0x4b7b14,_0x49b7c2,_0x444d8d),await updateQuoteFile(_0x444d8d,_0x5c0ba8,_0x597290),log('Proses\x20bot\x20kutipan\x20selesai\x20dengan\x20sukses!'),_0x545de4;}((async()=>{const _0x2af404=a0_0x52c88d;let _0x60b9a2=[];try{await a0_0x1013ef['mkdir'](OUTPUT_DIR,{'recursive':!![]}),await a0_0x1013ef[_0x2af404(0xdc)](DOWNLOADS_DIR,{'recursive':!![]});const _0x3e6aa2=await loadConfig();if(_0x3e6aa2['bot_mode']===_0x2af404(0x109))_0x60b9a2=await runQuotesBot(_0x3e6aa2);else{log(_0x2af404(0xd8)+_0x3e6aa2[_0x2af404(0xf7)]+_0x2af404(0x14a),_0x2af404(0x147));return;}}catch(_0x3dd650){log(_0x2af404(0xf1)+_0x3dd650[_0x2af404(0x116)],'ERROR'),process[_0x2af404(0x130)](0x1);}finally{_0x60b9a2&&_0x60b9a2['length']>0x0&&await cleanup(_0x60b9a2);}})());
