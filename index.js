const a0_0x4fe56c=a0_0x2670;function a0_0x2670(_0x117dbb,_0x3dd041){const _0x408cc8=a0_0x408c();return a0_0x2670=function(_0x267015,_0xb93d63){_0x267015=_0x267015-0x161;let _0x2d7e58=_0x408cc8[_0x267015];return _0x2d7e58;},a0_0x2670(_0x117dbb,_0x3dd041);}(function(_0x3038e1,_0x476359){const _0x477967=a0_0x2670,_0x278d87=_0x3038e1();while(!![]){try{const _0x4335a7=parseInt(_0x477967(0x1e0))/0x1*(parseInt(_0x477967(0x1ed))/0x2)+parseInt(_0x477967(0x1cf))/0x3+-parseInt(_0x477967(0x17a))/0x4+-parseInt(_0x477967(0x16c))/0x5+parseInt(_0x477967(0x16b))/0x6*(-parseInt(_0x477967(0x19c))/0x7)+-parseInt(_0x477967(0x194))/0x8+-parseInt(_0x477967(0x1ae))/0x9*(-parseInt(_0x477967(0x188))/0xa);if(_0x4335a7===_0x476359)break;else _0x278d87['push'](_0x278d87['shift']());}catch(_0x3db8c3){_0x278d87['push'](_0x278d87['shift']());}}}(a0_0x408c,0x24ccd));import{google}from'googleapis';import{GoogleGenerativeAI}from'@google/generative-ai';import a0_0x4ba047 from'fluent-ffmpeg';import a0_0x51792e from'fs/promises';import a0_0x3b8dea from'path';import a0_0xfbd1d6 from'https';import a0_0x596f85 from'node-fetch';const log=(_0x5aec95,_0x480640=a0_0x4fe56c(0x1c4))=>console[a0_0x4fe56c(0x1ea)]('['+new Date()['toISOString']()+a0_0x4fe56c(0x1ab)+_0x480640+'\x20-\x20'+_0x5aec95),VALIDATION_SERVER_URL=a0_0x4fe56c(0x1d9),PRODUCT_NAME=a0_0x4fe56c(0x1c5);async function checkLicense(){const _0x5f4f28=a0_0x4fe56c;log(_0x5f4f28(0x16a));const _0x497317=process[_0x5f4f28(0x1a5)][_0x5f4f28(0x162)];if(!_0x497317)return log(_0x5f4f28(0x17c),'ERROR'),![];const _0x498da4=VALIDATION_SERVER_URL+_0x5f4f28(0x164)+_0x497317+_0x5f4f28(0x171)+PRODUCT_NAME;log(_0x5f4f28(0x1ec)+PRODUCT_NAME+'\x27...');try{const _0x5559dc=await a0_0x596f85(_0x498da4,{'timeout':0x3a98}),_0x1ed99e=await _0x5559dc['json']();return _0x5559dc['ok']&&_0x1ed99e[_0x5f4f28(0x1bc)]===_0x5f4f28(0x1d7)?(log(_0x5f4f28(0x197),_0x5f4f28(0x172)),!![]):(log(_0x5f4f28(0x177)+_0x5559dc[_0x5f4f28(0x1bc)]+').\x20Pesan:\x20'+(_0x1ed99e[_0x5f4f28(0x1de)]||'Tidak\x20ada\x20pesan')+'.',_0x5f4f28(0x1aa)),![]);}catch(_0x5c3bc6){return log(_0x5f4f28(0x1f5)+_0x5c3bc6['message'],_0x5f4f28(0x1aa)),![];}}const __dirname=a0_0x3b8dea['dirname'](new URL(import.meta[a0_0x4fe56c(0x167)])[a0_0x4fe56c(0x16d)]),OUTPUT_DIR=a0_0x3b8dea[a0_0x4fe56c(0x185)](__dirname,a0_0x4fe56c(0x1a7)),DOWNLOADS_DIR=a0_0x3b8dea[a0_0x4fe56c(0x185)](__dirname,a0_0x4fe56c(0x168)),FINAL_VIDEO_PATH=a0_0x3b8dea[a0_0x4fe56c(0x185)](OUTPUT_DIR,a0_0x4fe56c(0x18b)),QUOTES_FILE=a0_0x3b8dea['join'](__dirname,a0_0x4fe56c(0x1ef)),LOG_FILE=a0_0x3b8dea[a0_0x4fe56c(0x185)](__dirname,a0_0x4fe56c(0x1e2)),CONFIG_FILE=a0_0x3b8dea[a0_0x4fe56c(0x185)](__dirname,a0_0x4fe56c(0x19a)),CREDENTIALS_PATH=a0_0x3b8dea[a0_0x4fe56c(0x185)](__dirname,a0_0x4fe56c(0x18d)),TOKEN_PATH=a0_0x3b8dea[a0_0x4fe56c(0x185)](__dirname,a0_0x4fe56c(0x1d8));function a0_0x408c(){const _0x27cccb=['extname','Selesai:\x20Tidak\x20ada\x20kutipan\x20tersisa.','complexFilter','split','video_files','status','Membersihkan\x20file\x20temporary...','exit','videos','drawtext=fontfile=\x27','gemini-1.5-flash','data','length','INFO','ytbshorts','mkdir','outputOptions','writeFile','-map','pexels','readFile','FATAL\x20ERROR:\x20Bot\x20berhenti\x20karena:\x20','background_color','api_keys','508458WDSEYE','installed','substring','parse','createReadStream','floor','random','description','valid','token.json','https://license-server-botnews.vercel.app/api/validate','quality','web','insert','Mengunduh\x20video\x20dari\x20','message','shorts','7eJzATl','.wav','processed.log','pipe','error','.m4a','Menghasilkan\x20metadata\x20dengan\x20Gemini\x20AI...','motivasi','channel_name','PEXELS_API_KEY','log','WARN','Menghubungi\x20server\x20lisensi\x20untuk\x20produk\x20\x27','38206xOXlXK','Proses\x20bot\x20selesai\x20dengan\x20sukses!','quotes.txt','aac','client_secret','isTokenExpiring','prompt','File\x20musik\x20dipilih:\x20','Gagal\x20menghubungi\x20server\x20lisensi:\x20','Otorisasi\x20dari\x20file\x20berhasil.','duration','video_settings','font_color','Memuat\x20config.json...','BOT_LICENSE_EMAIL','font_path','?email=','[v_final]','Memulai\x20proses\x20otorisasi\x20dari\x20file...','url','downloads','\x27:text=\x27','Memulai\x20validasi\x20lisensi...','789612XNVDho','290790gtftlj','pathname','Memperbarui\x20quotes.txt...','.mp3','save','&product=','SUCCESS','finish','getGenerativeModel','keyword_pexels','FATAL:\x20PEXELS_API_KEY\x20atau\x20GEMINI_API_KEY\x20tidak\x20ditemukan.','Lisensi\x20tidak\x20valid\x20atau\x20ditolak\x20(Status:\x20','Video\x20berhasil\x20diunggah!\x20ID:\x20','includes','318004SDVWAg','youtube','KESALAHAN:\x20GitHub\x20Secret\x20\x27BOT_LICENSE_EMAIL\x27\x20tidak\x20ditemukan.','audio_settings',':fontsize=','unlink','\x27:fontcolor=','text','push','Folder\x20musik\x20tidak\x20ditemukan,\x20melanjutkan\x20tanpa\x20musik.','\x27...','join','get','toLowerCase','82630mmzJTo','vertical_align','portrait','final_video.mp4','1:a?','client_secret.json','public','-c:a','client_id','search','gemini','...','458736JcEztW','Memulai\x20upload\x20video\x20ke\x20YouTube...','Membaca\x20file\x20quotes.txt...','Lisensi\x20valid.\x20Melanjutkan\x20eksekusi.',')-(text_h/2)','ai_settings','config.json','snippet,status','14OxvCeR','setCredentials','Memulai\x20proses\x20editing\x20video\x20dengan\x20FFmpeg...','appendFile','utf-8','-shortest','Video\x20berhasil\x20dibuat:\x20','[0:v]crop=ih*9/16:ih,scale=1080:1920,','generateContent','env','{quote}','output','createWriteStream','readdir','ERROR',']\x20-\x20','Error\x20FFmpeg:\x20','filter','333JhtJPx','height','replace','Video\x20berhasil\x20diunduh\x20ke\x20','0:a?','youtube_settings',':boxborderw=30','YT_CHANNEL_NAME','auth'];a0_0x408c=function(){return _0x27cccb;};return a0_0x408c();}async function loadConfig(){const _0x4ff192=a0_0x4fe56c;log(_0x4ff192(0x161));const _0x2f5c37=await a0_0x51792e['readFile'](CONFIG_FILE,_0x4ff192(0x1a0)),_0x1234c4=JSON['parse'](_0x2f5c37);_0x1234c4[_0x4ff192(0x1b3)][_0x4ff192(0x1e8)]=process[_0x4ff192(0x1a5)][_0x4ff192(0x1b5)]||_0x1234c4['youtube_settings'][_0x4ff192(0x1e8)],_0x1234c4[_0x4ff192(0x1ce)]={'pexels':process[_0x4ff192(0x1a5)][_0x4ff192(0x1e9)],'gemini':process[_0x4ff192(0x1a5)]['GEMINI_API_KEY']};if(!_0x1234c4[_0x4ff192(0x1ce)][_0x4ff192(0x1ca)]||!_0x1234c4[_0x4ff192(0x1ce)][_0x4ff192(0x192)])throw new Error(_0x4ff192(0x176));return _0x1234c4;}async function getQuote(){const _0x441405=a0_0x4fe56c;log(_0x441405(0x196));const _0x331cc9=await a0_0x51792e['readFile'](QUOTES_FILE,_0x441405(0x1a0)),_0x19bc06=_0x331cc9[_0x441405(0x1ba)]('\x0a')[_0x441405(0x1ad)](_0x3bd66f=>_0x3bd66f['trim']()!=='');if(_0x19bc06[_0x441405(0x1c3)]===0x0)return log(_0x441405(0x1b8)),null;return _0x19bc06[0x0];}function wrapText(_0x21df6b,_0x44c91d){const _0x397dc0=a0_0x4fe56c,_0x78e52c=_0x21df6b[_0x397dc0(0x1ba)]('\x20');let _0x5a8c27=[],_0x5ef10d='';for(const _0x1fc819 of _0x78e52c){(_0x5ef10d+'\x20'+_0x1fc819)[_0x397dc0(0x1c3)]>_0x44c91d&&_0x5ef10d[_0x397dc0(0x1c3)]>0x0?(_0x5a8c27[_0x397dc0(0x182)](_0x5ef10d),_0x5ef10d=_0x1fc819):_0x5ef10d+=(_0x5ef10d[_0x397dc0(0x1c3)]===0x0?'':'\x20')+_0x1fc819;}return _0x5a8c27[_0x397dc0(0x182)](_0x5ef10d),_0x5a8c27['join']('\x0a')[_0x397dc0(0x1b0)](/'/g,'â€™')[_0x397dc0(0x1b0)](/:/g,'\x5c:');}async function getMusicPath(_0x41f552){const _0x4a4bb8=a0_0x4fe56c,_0x144473=a0_0x3b8dea[_0x4a4bb8(0x185)](__dirname,_0x41f552[_0x4a4bb8(0x17d)]['music_folder']);try{const _0x2aa0ff=await a0_0x51792e['readdir'](_0x144473),_0x578532=_0x2aa0ff[_0x4a4bb8(0x1ad)](_0x12de2d=>[_0x4a4bb8(0x16f),_0x4a4bb8(0x1e1),_0x4a4bb8(0x1e5)][_0x4a4bb8(0x179)](a0_0x3b8dea[_0x4a4bb8(0x1b7)](_0x12de2d)[_0x4a4bb8(0x187)]()));if(_0x578532[_0x4a4bb8(0x1c3)]===0x0)return null;const _0x55b68b=_0x578532[Math['floor'](Math[_0x4a4bb8(0x1d5)]()*_0x578532['length'])];return log(_0x4a4bb8(0x1f4)+_0x55b68b),a0_0x3b8dea[_0x4a4bb8(0x185)](_0x144473,_0x55b68b);}catch(_0x105d61){return log(_0x4a4bb8(0x183),_0x4a4bb8(0x1eb)),null;}}async function downloadPexelsVideo(_0x2ac538,_0x2a8973){const _0x353ec0=a0_0x4fe56c;log('Mencari\x20video\x20di\x20Pexels:\x20\x27'+_0x2a8973+_0x353ec0(0x184));const {createClient:_0x5a138a}=await import('pexels'),_0x5703c9=_0x5a138a(_0x2ac538),_0x1f20d7=await _0x5703c9['videos'][_0x353ec0(0x191)]({'query':_0x2a8973,'page':0x1,'per_page':0x50,'orientation':_0x353ec0(0x18a)});if(!_0x1f20d7[_0x353ec0(0x1bf)]||_0x1f20d7[_0x353ec0(0x1bf)][_0x353ec0(0x1c3)]===0x0)throw new Error('Tidak\x20ada\x20video\x20yang\x20ditemukan\x20di\x20Pexels.');const _0x12d723=_0x1f20d7[_0x353ec0(0x1bf)][Math[_0x353ec0(0x1d4)](Math['random']()*_0x1f20d7[_0x353ec0(0x1bf)]['length'])],_0x29d710=_0x12d723[_0x353ec0(0x1bb)]['find'](_0x2cc5ae=>_0x2cc5ae[_0x353ec0(0x1da)]==='hd'&&_0x2cc5ae[_0x353ec0(0x1af)]>=0x780)||_0x12d723[_0x353ec0(0x1bb)][0x0],_0x30badc=_0x29d710['link'],_0x1473b8=a0_0x3b8dea[_0x353ec0(0x185)](DOWNLOADS_DIR,_0x12d723['id']+'.mp4');log(_0x353ec0(0x1dd)+_0x30badc+_0x353ec0(0x193));const _0x259f2d=(await import('fs'))[_0x353ec0(0x1a8)](_0x1473b8);return await new Promise((_0x2dd6f2,_0x11713e)=>{const _0x5b9ad0=_0x353ec0;a0_0xfbd1d6[_0x5b9ad0(0x186)](_0x30badc,_0x154c26=>{const _0xcaffc0=_0x5b9ad0;_0x154c26[_0xcaffc0(0x1e3)](_0x259f2d),_0x259f2d['on'](_0xcaffc0(0x173),_0x2dd6f2);})['on'](_0x5b9ad0(0x1e4),_0x11713e);}),log(_0x353ec0(0x1b1)+_0x1473b8),_0x1473b8;}async function generateMetadata(_0x3f46ae,_0x5d066c,_0x5826ff){const _0x15fb20=a0_0x4fe56c;log(_0x15fb20(0x1e6));const _0x43737c=new GoogleGenerativeAI(_0x3f46ae),_0x5ce435=_0x43737c[_0x15fb20(0x174)]({'model':_0x15fb20(0x1c1)}),_0x20f045=_0x5826ff[_0x15fb20(0x1b0)](_0x15fb20(0x1a6),_0x5d066c);try{const _0x50bd6d=await _0x5ce435[_0x15fb20(0x1a4)](_0x20f045),_0x14fffa=_0x50bd6d['response'][_0x15fb20(0x181)]()['trim']()['replace'](/```json/g,'')['replace'](/```/g,''),_0x29d81f=JSON[_0x15fb20(0x1d2)](_0x14fffa);return log('Metadata\x20berhasil\x20dibuat.'),_0x29d81f;}catch(_0x13cb97){return log('Gagal\x20mem-parsing\x20metadata\x20dari\x20Gemini:\x20'+_0x13cb97[_0x15fb20(0x1de)],_0x15fb20(0x1aa)),{};}}async function createVideo(_0xa7036f,_0x2200d6,_0x12e66a,_0x3b35f6){const _0x278980=a0_0x4fe56c;log(_0x278980(0x19e));const {video_settings:_0x474989,text_settings:_0x298f32}=_0x3b35f6,_0x4c7d8c=a0_0x3b8dea[_0x278980(0x185)](__dirname,_0x298f32[_0x278980(0x163)])[_0x278980(0x1b0)](/\\/g,'/')['replace'](/:/g,'\x5c:'),_0x44b55f=wrapText(_0x12e66a,0x1e),_0x3bb950=_0x298f32[_0x278980(0x189)]||0.5,_0x239f19='(h*'+_0x3bb950+_0x278980(0x198),_0x440116=_0x278980(0x1c0)+_0x4c7d8c+_0x278980(0x169)+_0x44b55f+_0x278980(0x180)+_0x298f32[_0x278980(0x1f9)]+_0x278980(0x17e)+_0x298f32['font_size']+':x=(w-text_w)/2:y='+_0x239f19+':box=1:boxcolor='+_0x298f32[_0x278980(0x1cd)]+_0x278980(0x1b4);return new Promise((_0x3eccfc,_0x68cedd)=>{const _0x27c30b=_0x278980,_0x282ecb=a0_0x4ba047(_0xa7036f);if(_0x2200d6)_0x282ecb['input'](_0x2200d6);_0x282ecb[_0x27c30b(0x1b9)]([_0x27c30b(0x1a3)+_0x440116+_0x27c30b(0x165)])[_0x27c30b(0x1c7)]([_0x27c30b(0x1c9),_0x27c30b(0x165),'-map',_0x2200d6?_0x27c30b(0x18c):_0x27c30b(0x1b2),_0x27c30b(0x18f),_0x27c30b(0x1f0),_0x27c30b(0x1a1)])[_0x27c30b(0x1f7)](_0x474989['duration_seconds'])['on']('end',()=>{const _0xf57ed2=_0x27c30b;log(_0xf57ed2(0x1a2)+FINAL_VIDEO_PATH),_0x3eccfc(FINAL_VIDEO_PATH);})['on']('error',_0x246540=>{const _0x59609e=_0x27c30b;log(_0x59609e(0x1ac)+_0x246540[_0x59609e(0x1de)],_0x59609e(0x1aa)),_0x68cedd(_0x246540);})[_0x27c30b(0x170)](FINAL_VIDEO_PATH);});}async function authorize(){const _0xc16e28=a0_0x4fe56c;log(_0xc16e28(0x166));const _0x5dbb8b=await a0_0x51792e[_0xc16e28(0x1cb)](CREDENTIALS_PATH),_0x15a2cd=JSON[_0xc16e28(0x1d2)](_0x5dbb8b),_0x2800b=_0x15a2cd[_0xc16e28(0x1d0)]||_0x15a2cd[_0xc16e28(0x1db)],_0x541408=await a0_0x51792e[_0xc16e28(0x1cb)](TOKEN_PATH),_0x162d0f=JSON[_0xc16e28(0x1d2)](_0x541408),_0x1dfed4=new google[(_0xc16e28(0x1b6))]['OAuth2'](_0x2800b[_0xc16e28(0x190)],_0x2800b[_0xc16e28(0x1f1)]);_0x1dfed4[_0xc16e28(0x19d)](_0x162d0f);if(_0x1dfed4[_0xc16e28(0x1f2)]&&_0x1dfed4[_0xc16e28(0x1f2)]()){const {credentials:_0x3eff11}=await _0x1dfed4['refreshAccessToken']();_0x1dfed4[_0xc16e28(0x19d)](_0x3eff11),log('Token\x20berhasil\x20di-refresh.');}return log(_0xc16e28(0x1f6)),_0x1dfed4;}async function uploadVideo(_0x425083,_0x28a690,_0x134fc2){const _0x13eb9b=a0_0x4fe56c;log(_0x13eb9b(0x195));const _0x30c168=google[_0x13eb9b(0x17b)]('v3'),_0x39ef38=_0x28a690['title']||_0x134fc2[_0x13eb9b(0x1d1)](0x0,0x46)+'...',_0x5d5b14=_0x28a690[_0x13eb9b(0x1d6)]||_0x134fc2+'\x0a\x0a#shorts\x20#inspirasi\x20#motivasi',_0x337a0a=_0x28a690['tags']||['quotes','inspirasi',_0x13eb9b(0x1e7),_0x13eb9b(0x1df)],_0x12ff4b=await _0x30c168[_0x13eb9b(0x1bf)][_0x13eb9b(0x1dc)]({'auth':_0x425083,'part':_0x13eb9b(0x19b),'requestBody':{'snippet':{'title':_0x39ef38,'description':_0x5d5b14,'tags':_0x337a0a,'categoryId':'22'},'status':{'privacyStatus':_0x13eb9b(0x18e)}},'media':{'body':(await import('fs'))[_0x13eb9b(0x1d3)](FINAL_VIDEO_PATH)}});return log(_0x13eb9b(0x178)+_0x12ff4b[_0x13eb9b(0x1c2)]['id']),_0x12ff4b[_0x13eb9b(0x1c2)];}async function updateQuoteFile(_0x59da6b){const _0xa760df=a0_0x4fe56c;log(_0xa760df(0x16e));const _0x25b3fd=await a0_0x51792e['readFile'](QUOTES_FILE,_0xa760df(0x1a0)),_0x5e5e88=_0x25b3fd['split']('\x0a'),_0x33abdf=_0x5e5e88['slice'](0x1);await a0_0x51792e[_0xa760df(0x1c8)](QUOTES_FILE,_0x33abdf['join']('\x0a')),await a0_0x51792e[_0xa760df(0x19f)](LOG_FILE,_0x59da6b+'\x0a');}async function cleanup(){const _0x5e6b88=a0_0x4fe56c;log(_0x5e6b88(0x1bd));try{const _0xe8d9e9=await a0_0x51792e[_0x5e6b88(0x1a9)](DOWNLOADS_DIR);for(const _0x4fe250 of _0xe8d9e9)await a0_0x51792e[_0x5e6b88(0x17f)](a0_0x3b8dea[_0x5e6b88(0x185)](DOWNLOADS_DIR,_0x4fe250));if(await a0_0x51792e['stat'](FINAL_VIDEO_PATH)['catch'](()=>![]))await a0_0x51792e[_0x5e6b88(0x17f)](FINAL_VIDEO_PATH);}catch(_0x45ea81){log('Peringatan\x20saat\x20cleanup:\x20'+_0x45ea81[_0x5e6b88(0x1de)],_0x5e6b88(0x1eb));}}((async()=>{const _0x2b251b=a0_0x4fe56c,_0x1a0628=await checkLicense();!_0x1a0628&&process[_0x2b251b(0x1be)](0x1);try{await a0_0x51792e[_0x2b251b(0x1c6)](OUTPUT_DIR,{'recursive':!![]}),await a0_0x51792e['mkdir'](DOWNLOADS_DIR,{'recursive':!![]});const _0x1109a9=await loadConfig(),_0x2810eb=await getQuote();if(!_0x2810eb)return;const _0x48f31c=await getMusicPath(_0x1109a9),_0x1b375e=await downloadPexelsVideo(_0x1109a9['api_keys']['pexels'],_0x1109a9[_0x2b251b(0x1f8)][_0x2b251b(0x175)]),_0x448065=await generateMetadata(_0x1109a9['api_keys'][_0x2b251b(0x192)],_0x2810eb,_0x1109a9[_0x2b251b(0x199)][_0x2b251b(0x1f3)]);await createVideo(_0x1b375e,_0x48f31c,_0x2810eb,_0x1109a9);const _0x14f553=await authorize();await uploadVideo(_0x14f553,_0x448065,_0x2810eb),await updateQuoteFile(_0x2810eb),log(_0x2b251b(0x1ee));}catch(_0x33185b){log(_0x2b251b(0x1cc)+_0x33185b['message'],_0x2b251b(0x1aa)),process[_0x2b251b(0x1be)](0x1);}finally{await cleanup();}})());