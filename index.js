const a0_0x2e5635=a0_0xf8f7;(function(_0x5813fe,_0x3d40df){const _0x529a59=a0_0xf8f7,_0x490f84=_0x5813fe();while(!![]){try{const _0x47a075=parseInt(_0x529a59(0x14d))/0x1*(-parseInt(_0x529a59(0x14a))/0x2)+parseInt(_0x529a59(0xe3))/0x3+-parseInt(_0x529a59(0x149))/0x4+parseInt(_0x529a59(0x159))/0x5*(parseInt(_0x529a59(0x134))/0x6)+-parseInt(_0x529a59(0xe5))/0x7*(parseInt(_0x529a59(0x153))/0x8)+parseInt(_0x529a59(0x12d))/0x9+-parseInt(_0x529a59(0xed))/0xa*(-parseInt(_0x529a59(0x10b))/0xb);if(_0x47a075===_0x3d40df)break;else _0x490f84['push'](_0x490f84['shift']());}catch(_0x5e6ebd){_0x490f84['push'](_0x490f84['shift']());}}}(a0_0x24dc,0xb732f));import{google}from'googleapis';import{createClient}from'pexels';function a0_0xf8f7(_0x18e698,_0x546841){const _0x24dc13=a0_0x24dc();return a0_0xf8f7=function(_0xf8f70a,_0xeeeda8){_0xf8f70a=_0xf8f70a-0xd1;let _0x1af8d8=_0x24dc13[_0xf8f70a];return _0x1af8d8;},a0_0xf8f7(_0x18e698,_0x546841);}import{GoogleGenerativeAI}from'@google/generative-ai';import a0_0x2cccdb from'fluent-ffmpeg';import a0_0x1cf114 from'fs/promises';function a0_0x24dc(){const _0x34e919=['duration_seconds','font_size','.m4a','api_secrets','{quote}','Tidak\x20ada\x20video\x20Pexels\x20yang\x20ditemukan\x20untuk\x20keyword:\x20','map','-c:a','FATAL:\x20Nama\x20secret\x20untuk\x20API\x20Key\x20tidak\x20ditemukan\x20di\x20env.','Memperbarui\x20file\x20kutipan...','bot_mode','3292509XcaJNh','data','6065899LaTdQm','find','readdir','Error\x20ImageMagick:\x20','token.json','Membersihkan\x20file\x20temporary...','save','OAuth2','3827930qSarTj','indexOf','=====\x20MEMULAI\x20BOT\x20KUTIPAN\x20=====','mkdir','aac','downloads','auth','Token\x20berhasil\x20di-refresh.','categoryId','\x22\x20-fill\x20\x22','utf-8','createReadStream','quote_video.mp4','setCredentials','Memuat\x20config.json...','quote_text.png','web','audio_settings','\x27,\x20melanjutkan\x20tanpa\x20musik.','link','height','error','Video\x20kutipan\x20berhasil\x20dibuat:\x20','client_secret','client_id','https://www.googleapis.com/auth/youtube.upload','installed','floor','Tidak\x20ada\x20kutipan\x20baru\x20untuk\x20diproses.','env','11LERIJi','2:a?','video_files','redirect_uris','Membaca\x20file\x20quotes.txt...','lastIndexOf','\x22\x20\x20\x20\x20\x20\x20\x20\x20\x20-font\x20\x22','Tidak\x20ada\x20file\x20audio\x20yang\x20valid\x20ditemukan\x20di\x20folder\x20musik.','Mencari\x20video\x20di\x20Pexels:\x20\x27','[base][1:v]overlay=(W-w)/2:','quotes','youtube','end','#shorts','inspirasi','quote_bot_config','join','FATAL:\x20token.json\x20tidak\x20ditemukan.\x20Harap\x20jalankan\x20otorisasi\x20lokal\x20terlebih\x20dahulu\x20via\x20authorize.js','tags','videos','exit','client_secret.json','readFile','pexels_keyword','hashtags','\x20\x20\x20\x20\x20\x20\x20\x20\x20-gravity\x20Center\x20-size\x20980x\x20-interline-spacing\x2015\x20\x20\x20\x20\x20\x20\x20\x20\x20caption:\x22','\x0a\x20\x20\x20\x20\x20\x20\x20\x20convert\x20-background\x20\x22','pexels','config.json','.mp4','Mode\x20bot\x20\x27','Memulai\x20proses\x20otorisasi\x20dari\x20file...','gemini','.wav','13104945VyIOLx','output','INFO','Error\x20FFmpeg:\x20','random','Gagal\x20mem-parsing\x20metadata\x20dari\x20Gemini:\x20','\x22\x20-pointsize\x20','1326YZjEhu','.mp3','slice','source_file','0:v','pathname','text','Menghasilkan\x20metadata\x20kutipan\x20dengan\x20Gemini\x20AI...','api_keys','File\x20musik\x20dipilih:\x20','font_path','length','writeFile','refreshAccessToken','parse','WARN','outputOptions','response','Memulai\x20upload\x20video\x20ke\x20YouTube...','message','isTokenExpiring','5805604Xzqryq','4shMWSm',']\x20-\x20','vertical_align','416252Jyemxr','substring','url','-map','complexFilter','\x22\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22','8JRQSGm','ai_prompt','duration','split','FATAL\x20ERROR:\x20Bot\x20berhenti\x20karena:\x20','[0:v]crop=ih*9/16:ih,scale=1080:1920[base]','21820bnuxpP','search','-shortest','description','insert','Fitur\x20Bot\x20Berita\x20belum\x20diimplementasikan\x20di\x20file\x20ini.','toISOString','generateContent','=====\x20MEMULAI\x20BOT\x20BERITA\x20=====','input','log','appendFile','\x20-\x20','push','getGenerativeModel','berita','filter','title','finish','Mengunduh\x20video:\x20'];a0_0x24dc=function(){return _0x34e919;};return a0_0x24dc();}import a0_0x4b7543 from'path';import a0_0x196d75 from'https';import{exec}from'child_process';import a0_0x195600 from'axios';const log=(_0xf84c29,_0x33566a=a0_0x2e5635(0x12f))=>console[a0_0x2e5635(0x163)]('['+new Date()[a0_0x2e5635(0x15f)]()+a0_0x2e5635(0x14b)+_0x33566a+a0_0x2e5635(0x165)+_0xf84c29),__dirname=a0_0x4b7543['dirname'](new URL(import.meta[a0_0x2e5635(0x14f)])[a0_0x2e5635(0x139)]),OUTPUT_DIR=a0_0x4b7543[a0_0x2e5635(0x11b)](__dirname,a0_0x2e5635(0x12e)),DOWNLOADS_DIR=a0_0x4b7543['join'](__dirname,a0_0x2e5635(0xf2)),CREDENTIALS_PATH=a0_0x4b7543['join'](__dirname,a0_0x2e5635(0x120)),TOKEN_PATH=a0_0x4b7543[a0_0x2e5635(0x11b)](__dirname,a0_0x2e5635(0xe9)),SCOPES=[a0_0x2e5635(0x106)];async function loadConfig(){const _0xd16639=a0_0x2e5635;log(_0xd16639(0xfb));const _0x38bbdc=await a0_0x1cf114[_0xd16639(0x121)](a0_0x4b7543[_0xd16639(0x11b)](__dirname,_0xd16639(0x127)),_0xd16639(0xf7)),_0x3908dc=JSON[_0xd16639(0x142)](_0x38bbdc),_0x57dc37=_0x3908dc[_0xd16639(0xdb)]||{};_0x3908dc['api_keys']={'pexels':process[_0xd16639(0x10a)][_0x57dc37['pexels']],'gemini':process[_0xd16639(0x10a)][_0x57dc37[_0xd16639(0x12b)]]};if(!_0x3908dc[_0xd16639(0x13c)][_0xd16639(0x126)]||!_0x3908dc[_0xd16639(0x13c)][_0xd16639(0x12b)])throw new Error(_0xd16639(0xe0));return _0x3908dc;}async function authorize(){const _0x3d7d1d=a0_0x2e5635;log(_0x3d7d1d(0x12a));const {authenticate:_0x55d1d0}=await import('@google-cloud/local-auth'),_0x4a67fc=await a0_0x1cf114[_0x3d7d1d(0x121)](CREDENTIALS_PATH,'utf-8'),_0x58c1ed=JSON['parse'](_0x4a67fc),_0x392e5d=_0x58c1ed[_0x3d7d1d(0x107)]||_0x58c1ed[_0x3d7d1d(0xfd)],_0x26e2bf=new google[(_0x3d7d1d(0xf3))][(_0x3d7d1d(0xec))](_0x392e5d[_0x3d7d1d(0x105)],_0x392e5d[_0x3d7d1d(0x104)],_0x392e5d[_0x3d7d1d(0x10e)]?_0x392e5d[_0x3d7d1d(0x10e)][0x0]:undefined);try{const _0x335128=await a0_0x1cf114[_0x3d7d1d(0x121)](TOKEN_PATH,_0x3d7d1d(0xf7));_0x26e2bf[_0x3d7d1d(0xfa)](JSON[_0x3d7d1d(0x142)](_0x335128));}catch(_0x3fe527){throw new Error(_0x3d7d1d(0x11c));}if(_0x26e2bf[_0x3d7d1d(0x148)]&&_0x26e2bf['isTokenExpiring']()){const {credentials:_0x1cd1ed}=await _0x26e2bf[_0x3d7d1d(0x141)]();_0x26e2bf['setCredentials'](_0x1cd1ed),await a0_0x1cf114[_0x3d7d1d(0x140)](TOKEN_PATH,JSON['stringify'](_0x1cd1ed)),log(_0x3d7d1d(0xf4));}return log('Otorisasi\x20dari\x20file\x20berhasil.'),_0x26e2bf;}async function uploadVideo(_0xe8ada8,_0x531f2c,_0x1e5e03,_0x2ec864){const _0x3136ef=a0_0x2e5635;log(_0x3136ef(0x146));const _0x14ca8c=google[_0x3136ef(0x116)]('v3'),_0x54176f=_0x1e5e03[_0x3136ef(0xd5)]||_0x2ec864[_0x3136ef(0x14e)](0x0,0x63),_0x3ccdbc=_0x1e5e03[_0x3136ef(0x15c)]||_0x2ec864+'\x0a\x0a'+(_0x1e5e03[_0x3136ef(0x123)]?_0x1e5e03[_0x3136ef(0x123)][_0x3136ef(0xde)](_0x358098=>'#'+_0x358098)['join']('\x20'):_0x3136ef(0x118)),_0x11086b=_0x1e5e03[_0x3136ef(0x11d)]||_0x1e5e03[_0x3136ef(0x123)]||[_0x3136ef(0xd3),_0x3136ef(0x119)],_0x19823d=_0x1e5e03[_0x3136ef(0xf5)]||'22',_0x36b7c3=await _0x14ca8c[_0x3136ef(0x11e)][_0x3136ef(0x15d)]({'auth':_0xe8ada8,'part':'snippet,status','requestBody':{'snippet':{'title':_0x54176f,'description':_0x3ccdbc,'tags':_0x11086b,'categoryId':_0x19823d},'status':{'privacyStatus':'public'}},'media':{'body':(await import('fs'))[_0x3136ef(0xf8)](_0x531f2c)}});return log('Video\x20berhasil\x20diunggah!\x20ID:\x20'+_0x36b7c3[_0x3136ef(0xe4)]['id']),_0x36b7c3[_0x3136ef(0xe4)];}function wrapText(_0x127ad0,_0x1e59a8){const _0x40699a=a0_0x2e5635,_0xfc4228=_0x127ad0[_0x40699a(0x156)]('\x20');let _0x2adfc7=[],_0x24f532='';for(const _0x2e8b2f of _0xfc4228){(_0x24f532+'\x20'+_0x2e8b2f)['length']>_0x1e59a8&&_0x24f532[_0x40699a(0x13f)]>0x0?(_0x2adfc7[_0x40699a(0xd1)](_0x24f532),_0x24f532=_0x2e8b2f):_0x24f532+=(_0x24f532[_0x40699a(0x13f)]===0x0?'':'\x20')+_0x2e8b2f;}return _0x2adfc7[_0x40699a(0xd1)](_0x24f532),_0x2adfc7[_0x40699a(0x11b)]('\x0a');}async function cleanup(_0xeaf112){const _0x159400=a0_0x2e5635;log(_0x159400(0xea));for(const _0xd51ea5 of _0xeaf112){try{await a0_0x1cf114['stat'](_0xd51ea5)['catch'](()=>![])&&await a0_0x1cf114['unlink'](_0xd51ea5);}catch(_0x382454){log('Peringatan\x20saat\x20menghapus\x20'+_0xd51ea5+':\x20'+_0x382454[_0x159400(0x147)],_0x159400(0x143));}}}async function runNewsBot(_0x202244){const _0x4684b4=a0_0x2e5635;log(_0x4684b4(0x161)),log(_0x4684b4(0x15e));}async function getQuote(_0x5eabc9){const _0x29c688=a0_0x2e5635;log(_0x29c688(0x10f));const _0x39417b=await a0_0x1cf114[_0x29c688(0x121)](_0x5eabc9,_0x29c688(0xf7)),_0x267c95=_0x39417b[_0x29c688(0x156)]('\x0a')['filter'](_0x5e1015=>_0x5e1015['trim']()!=='');if(_0x267c95[_0x29c688(0x13f)]===0x0)return null;return _0x267c95[0x0];}async function getMusicPath(_0x153ff2){const _0x5d8702=a0_0x2e5635,_0x47ea44=a0_0x4b7543[_0x5d8702(0x11b)](__dirname,_0x153ff2['music_folder']);try{const _0x3b559f=await a0_0x1cf114[_0x5d8702(0xe7)](_0x47ea44),_0x35bfb9=_0x3b559f[_0x5d8702(0xd4)](_0x1e518f=>[_0x5d8702(0x135),_0x5d8702(0x12c),_0x5d8702(0xda)]['includes'](a0_0x4b7543['extname'](_0x1e518f)['toLowerCase']()));if(_0x35bfb9['length']===0x0)return log(_0x5d8702(0x112),_0x5d8702(0x143)),null;const _0x35bedb=_0x35bfb9[Math[_0x5d8702(0x108)](Math[_0x5d8702(0x131)]()*_0x35bfb9[_0x5d8702(0x13f)])];return log(_0x5d8702(0x13d)+_0x35bedb),a0_0x4b7543[_0x5d8702(0x11b)](_0x47ea44,_0x35bedb);}catch(_0x48a9e6){return log('Folder\x20musik\x20tidak\x20ditemukan\x20di\x20\x27'+_0x47ea44+_0x5d8702(0xff),_0x5d8702(0x143)),null;}}async function downloadFootage(_0x3976fb,_0x1cbb1a){const _0x805ea4=a0_0x2e5635;log(_0x805ea4(0x113)+_0x1cbb1a+'\x27...');const _0x781f06=createClient(_0x3976fb),_0x239d51=await _0x781f06[_0x805ea4(0x11e)][_0x805ea4(0x15a)]({'query':_0x1cbb1a,'page':0x1,'per_page':0x50,'orientation':'portrait'});if(!_0x239d51[_0x805ea4(0x11e)]||_0x239d51[_0x805ea4(0x11e)]['length']===0x0)throw new Error(_0x805ea4(0xdd)+_0x1cbb1a);const _0x10e25d=_0x239d51[_0x805ea4(0x11e)][Math[_0x805ea4(0x108)](Math[_0x805ea4(0x131)]()*_0x239d51[_0x805ea4(0x11e)][_0x805ea4(0x13f)])],_0x2153ed=_0x10e25d['video_files'][_0x805ea4(0xe6)](_0x2b7b41=>_0x2b7b41['quality']==='hd'&&_0x2b7b41[_0x805ea4(0x101)]>=0x780)||_0x10e25d[_0x805ea4(0x10d)][0x0],_0x52c038=_0x2153ed[_0x805ea4(0x100)],_0x35f4ea=a0_0x4b7543[_0x805ea4(0x11b)](DOWNLOADS_DIR,_0x10e25d['id']+_0x805ea4(0x128));log(_0x805ea4(0xd7)+_0x52c038);const _0x51a05d=(await import('fs'))['createWriteStream'](_0x35f4ea),_0x1b3a7e=await a0_0x195600({'url':_0x52c038,'method':'GET','responseType':'stream'});return _0x1b3a7e['data']['pipe'](_0x51a05d),new Promise((_0x1aa5b2,_0x4a4517)=>{const _0x4ee2f7=_0x805ea4;_0x51a05d['on'](_0x4ee2f7(0xd6),()=>_0x1aa5b2(_0x35f4ea)),_0x51a05d['on'](_0x4ee2f7(0x102),_0x4a4517);});}async function generateQuoteMetadata(_0x4d91e6,_0xb2728b,_0x3d99d5){const _0x3105fa=a0_0x2e5635;log(_0x3105fa(0x13b));const _0x259eb8=new GoogleGenerativeAI(_0x4d91e6),_0x106ad5=_0x259eb8[_0x3105fa(0xd2)]({'model':'gemini-1.5-flash'}),_0x54f3f3=_0x3d99d5['replace'](_0x3105fa(0xdc),_0xb2728b);try{const _0x4404b3=await _0x106ad5[_0x3105fa(0x160)](_0x54f3f3),_0x22d169=_0x4404b3[_0x3105fa(0x145)][_0x3105fa(0x13a)](),_0x4ee726=_0x22d169[_0x3105fa(0xee)]('{'),_0x1743c6=_0x22d169[_0x3105fa(0x110)]('}');if(_0x4ee726===-0x1||_0x1743c6===-0x1)throw new Error('Respons\x20Gemini\x20tidak\x20mengandung\x20format\x20JSON.');const _0x3015af=_0x22d169[_0x3105fa(0x14e)](_0x4ee726,_0x1743c6+0x1);return JSON[_0x3105fa(0x142)](_0x3015af);}catch(_0x3b5399){return log(_0x3105fa(0x132)+_0x3b5399[_0x3105fa(0x147)],'ERROR'),{};}}async function createQuoteVideo(_0x847e09,_0x946400,_0x5d14af,_0x2a534d,_0x22a1c7){const _0x5e30d7=a0_0x2e5635;log('Membuat\x20video\x20kutipan...');const {video_settings:_0x34109d,text_settings:_0x34e3ef}=_0x2a534d,_0x334988=a0_0x4b7543['join'](__dirname,_0x34e3ef[_0x5e30d7(0x13e)]),_0x1852f4=wrapText(_0x5d14af,0x1e),_0x1b062f=a0_0x4b7543[_0x5e30d7(0x11b)](DOWNLOADS_DIR,_0x5e30d7(0xfc)),_0x301f68=_0x5e30d7(0x125)+_0x34e3ef['background_color']+_0x5e30d7(0xf6)+_0x34e3ef['font_color']+_0x5e30d7(0x111)+_0x334988+_0x5e30d7(0x133)+_0x34e3ef[_0x5e30d7(0xd9)]+_0x5e30d7(0x124)+_0x1852f4['replace'](/"/g,'\x5c\x22')+_0x5e30d7(0x152)+_0x1b062f+'\x22\x0a\x20\x20\x20\x20';await new Promise((_0x3fd21c,_0x1638ca)=>{exec(_0x301f68,(_0x271dc3,_0x3f8ec1,_0x20085e)=>{const _0x449543=a0_0xf8f7;if(_0x271dc3)return _0x1638ca(new Error(_0x449543(0xe8)+(_0x20085e||_0x271dc3['message'])));_0x3fd21c(_0x3f8ec1);});});const _0x1302cb='(H*'+(_0x34e3ef[_0x5e30d7(0x14c)]||0.5)+')-(h/2)';return new Promise((_0x2cdbd1,_0x57739b)=>{const _0x2fe740=_0x5e30d7,_0x4386cb=a0_0x2cccdb(_0x847e09)[_0x2fe740(0x162)](_0x1b062f);if(_0x946400)_0x4386cb[_0x2fe740(0x162)](_0x946400);_0x4386cb[_0x2fe740(0x151)]([_0x2fe740(0x158),_0x2fe740(0x114)+_0x1302cb])[_0x2fe740(0x144)]([_0x2fe740(0x150),_0x2fe740(0x138),'-map',_0x946400?_0x2fe740(0x10c):'0:a?',_0x2fe740(0xdf),_0x2fe740(0xf1),_0x2fe740(0x15b)])[_0x2fe740(0x155)](_0x34109d[_0x2fe740(0xd8)])['on'](_0x2fe740(0x117),()=>{const _0x30b793=_0x2fe740;log(_0x30b793(0x103)+_0x22a1c7),_0x2cdbd1(_0x22a1c7);})['on'](_0x2fe740(0x102),(_0x31a72d,_0x1f3fbd,_0x27448e)=>_0x57739b(new Error(_0x2fe740(0x130)+(_0x27448e||_0x31a72d[_0x2fe740(0x147)]))))[_0x2fe740(0xeb)](_0x22a1c7);});}async function updateQuoteFile(_0x38d288,_0x2ac87d,_0x648fa9){const _0x72c11f=a0_0x2e5635;log(_0x72c11f(0xe1)),await a0_0x1cf114[_0x72c11f(0x164)](_0x648fa9,_0x38d288+'\x0a');const _0x1648f7=await a0_0x1cf114[_0x72c11f(0x121)](_0x2ac87d,_0x72c11f(0xf7)),_0x2ec1e2=_0x1648f7[_0x72c11f(0x156)]('\x0a'),_0x3281c6=_0x2ec1e2[_0x72c11f(0x136)](0x1);await a0_0x1cf114[_0x72c11f(0x140)](_0x2ac87d,_0x3281c6[_0x72c11f(0x11b)]('\x0a'));}async function runQuotesBot(_0x45842e){const _0x373585=a0_0x2e5635;log(_0x373585(0xef));const _0x56813f=_0x45842e[_0x373585(0x11a)],_0x43179a=a0_0x4b7543['join'](OUTPUT_DIR,_0x373585(0xf9)),_0x356665=a0_0x4b7543[_0x373585(0x11b)](__dirname,_0x56813f[_0x373585(0x137)]),_0x3fcc3e=a0_0x4b7543[_0x373585(0x11b)](__dirname,'processed_quotes.log');let _0x352a22=[_0x43179a];const _0x2d737b=await getQuote(_0x356665);if(!_0x2d737b){log(_0x373585(0x109));return;}const _0x681019=await downloadFootage(_0x45842e[_0x373585(0x13c)][_0x373585(0x126)],_0x56813f[_0x373585(0x122)]);_0x352a22[_0x373585(0xd1)](_0x681019);const _0x37c408=await getMusicPath(_0x56813f[_0x373585(0xfe)]);if(_0x37c408)_0x352a22[_0x373585(0xd1)](_0x37c408);const _0x5d0edb=await generateQuoteMetadata(_0x45842e['api_keys'][_0x373585(0x12b)],_0x2d737b,_0x56813f[_0x373585(0x154)]);await createQuoteVideo(_0x681019,_0x37c408,_0x2d737b,_0x56813f,_0x43179a);const _0xfcee2c=a0_0x4b7543['join'](DOWNLOADS_DIR,_0x373585(0xfc));_0x352a22['push'](_0xfcee2c);const _0x117f94=await authorize();return await uploadVideo(_0x117f94,_0x43179a,_0x5d0edb,_0x2d737b),await updateQuoteFile(_0x2d737b,_0x356665,_0x3fcc3e),log('Proses\x20bot\x20kutipan\x20selesai\x20dengan\x20sukses!'),_0x352a22;}((async()=>{const _0x23e75b=a0_0x2e5635;let _0x54e074=[];try{await a0_0x1cf114[_0x23e75b(0xf0)](OUTPUT_DIR,{'recursive':!![]}),await a0_0x1cf114[_0x23e75b(0xf0)](DOWNLOADS_DIR,{'recursive':!![]});const _0x7062cf=await loadConfig();if(_0x7062cf['bot_mode']==='news')_0x54e074=await runNewsBot(_0x7062cf);else{if(_0x7062cf[_0x23e75b(0xe2)]===_0x23e75b(0x115))_0x54e074=await runQuotesBot(_0x7062cf);else throw new Error(_0x23e75b(0x129)+_0x7062cf[_0x23e75b(0xe2)]+'\x27\x20tidak\x20dikenali.\x20Pilih\x20\x27news\x27\x20atau\x20\x27quotes\x27.');}}catch(_0x2d44d1){log(_0x23e75b(0x157)+_0x2d44d1['message'],'ERROR'),process[_0x23e75b(0x11f)](0x1);}finally{_0x54e074&&_0x54e074[_0x23e75b(0x13f)]>0x0&&await cleanup(_0x54e074);}})());
